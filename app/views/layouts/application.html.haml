!!! 5
%html{lang: 'en'}
  %head
    %meta{charset: "utf-8"}/
    %meta{'http-equiv' => "X-UA-Compatible", content: "IE=edge,chrome=1"}/
    %meta{'http-equiv' => "Content-Type", content: "text/html;charset=utf-8"}/

    %title
      - unless @page_title.blank?
        = @page_title.downcase
        \-
      = DOMAIN
    %meta{property: 'og:site_name', content: DOMAIN}/
    %meta{property: 'og:type', content: 'website'}/
    %meta{property: "og:title", content: (!@page_title.blank? ? @page_title.downcase : DOMAIN)}/
    = yield :meta

    %meta{name: "viewport", content: "width=device-width, initial-scale=1.0"}/

    %link{rel: "shortcut icon", href: "/favicon.ico"}/
    %link{rel: "apple-touch-icon", href: "/apple-touch-icon.png"}/

    %link{rel: "alternate", type: "application/rss+xml", title: "blog Feed", href: "http://tekniklr.tumblr.com/rss"}/
    %link{rel: "openid2.provider",  href: "https://www.google.com/accounts/o8/ud?source=profiles"}/
    %link{rel: "openid2.local_id", href: "https://www.google.com/profiles/tekniklr"}/

    %link{rel: "stylesheet", href: "https://fonts.googleapis.com/css?family=Maven+Pro", type: "text/css"}/

    = stylesheet_link_tag :application, media: :all
    = javascript_include_tag :application
    = csrf_meta_tag
    = csp_meta_tag

    = yield :header

    - cache @links do
      - for link in @links do
        %link{rel: 'me', href: link.url}/
  %body
    #container
      - if logged_in? 
        #admin
          %nav#admin_navigation{role: 'navigation'}
            .mobile
              %ul
                %li
                  Admin menu
                  %a#toggle_admin_navigation{href: '#'} ☰
              %ul#single_column_admin_navigation
                = render 'layouts/admin_nav_items'
            .regular
              %ul
                = render 'layouts/admin_nav_items'
              .break
      %header#pagehead{role: 'banner'}
        #banner
          = link_to image_tag("tekniklr.png", alt: DOMAIN, width: 178, height: 35), root_url
      %nav#navigation{role: 'navigation'}
        .mobile
          %ul
            %li
              %a#toggle_navigation{href: '#'} navigation
          %ul#single_column_navigation
            = render 'layouts/nav_items'
        .regular
          %ul
            = render 'layouts/nav_items'
          .break
      #main{role: 'main'}
        - if flash[:error]
          #flash.error
            %h2 Error
            = flash[:error]
        - if flash[:notice]
          #flash.notice
            %h2 Notice
            = flash[:notice]
        - unless @page_title.blank? || !@title_display
          %h1 #{@page_title}
        = yield
      %footer#pagefoot{role: 'contentinfo'}
        %div
          = link_to "©#{Time.now.year}", colophon_url
          
      #social
        %ul
          - cache @social_media do
            - for social_medium in @social_media do
              %li
                = link_to image_tag(social_medium.icon.url(:default), alt: social_medium.name, title: social_medium.name), social_medium.url, target: '_blank'

    = yield :javascript